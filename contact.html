<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Digital Harms Project</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <style>
      .mobilelinks {
        transform: translateX(100%);
      }
    </style>

    <!-- OpenGraph/Social sharing -->
    <meta name="description" content="Record any online harms you receive or witness" />
    <meta name="og:description" content="Record any online harms you receive or witness" />
    <meta property="og:image" content="digitalharm-icon-512.png" />
    <meta property="og:title" content="Digital Harms Project" />
    <meta name="twitter:card" content="summary" />
    <link rel="icon" href="assets/digitalharm-favicon.png" />
    <link rel="stylesheet" type="text/css" href="style.css" />

    <!-- PWA setup - update public/sw.js if you add your own assets like a new .css file -->
    <link rel="manifest" href="/manifest.json" />
    <script src="index.js" defer></script>
    <script src="menu.js" defer></script>

    <!-- Include jQuery -->
  <script src="https://unpkg.com/jquery/dist/jquery.min.js"></script>
  <!-- Include SurveyJS scripts and styles -->
  <script src="https://unpkg.com/survey-jquery@1.11.10/survey.jquery.min.js"></script>
  <script src="https://unpkg.com/survey-jquery@1.11.10/themes/index.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/survey-jquery@1.11.10/defaultV2.min.css" />
  <script src="./theme.js"></script>


  </head>
  <body>
    <header>
      <div id="install-nudge">
        <div class="content">
          <div>You can install this app!</div>
          <a href="install.html" class="install">HOW TO INSTALL?</a>
          <a id="close-button" class="close">&#215;</a>
        </div>
      </div>
      <div class="hamburger" id="hamburger">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </header>
    <main>
      <nav class="mobilelinks" id="mobile-links">
        <div class="moblinks"><a href="./">Report a digital harm</a></div>
        <div class="moblinks"><a href="instructions.html">Instructions</a></div>
        <div class="moblinks"><a href="contact.html">Technical support</a></div>
        <div class="moblinks"><a href="support.html">Emotional support</a></div>
      </nav>

      <div class="wrapper">
        <div class="content">
          <h1>Technical support</h1>
            <p>If you are experiencing any technical issues, please use the form below to contact us.</p>
            <p>This form is to help identify the problem so we can contact you quickly to provide any advice, guidance or fixes.</p>
            <div id="surveyElement" style="margin-top: 20px; margin-bottom: 20px; text-align: left; min-height: 400px; max-width: 1000px"></div>

  <script type="text/javascript">
    // Survey JSON definition
    const json = {
      "title": "Technical support form",
      "completedHtml": "<h3>Thank you for reaching out!</h3><h4>We will be in contact shortly to provide advice, guidance or fixes as needed.</h4>",
      "pages": [
        {
          "name": "identity",
          "title": "",
          "elements": [
            {
              "type": "text",
              "name": "identifier",
              "isRequired": true,
              "title": "What is the unique identifier (e.g., XB001) that we sent you by SMS/email?"
            },
            {
              "type": "text",
              "name": "initials",
              "title": "What are your initials (e.g., RC). We only use these in case there is an error in the code so we can make sure we're getting the right person's data. Your initials will NEVER be shared with anyone else",
              "isRequired": true,
            },
            {
              "type": "radiogroup",
              "name": "contact",
              "title": "How would you like to be contacted?",
              "isRequired": true,
              "choices": [
                "Phone call",
                "Email"
              ]
            },
          ]
        },
        {
          "name": "Phone call",
          "visibleIf": "{contact} = 'Phone call'",
          "title": "Contact details",
          "elements": [
            {
              "type": "text",
              "name": "number",
              "title": "Please enter your mobile phone number.",
              "isRequired": true,
            },
          ]
        },
        {
          "name": "Email",
          "visibleIf": "{contact} = 'Email'",
          "title": "Contact details",
          "elements": [
          {
              "type": "text",
              "name": "email",
              "title": "Please enter your email address.",
              "isRequired": true,
            }
          ]
        },
        {
          "name": "Details",
          "title": "Support issue",
          "elements": [
            {
              "type": "radiogroup",
              "name": "device",
              "title": "What type of device are you experiencing the issue on?",
              "isRequired": true,
              "choices": [
                "Android phone",
                "Apple iPhone",
                "Mac computer",
                "Windows computer",
                "Not sure",
              ],
              "showOtherItem": true
            },
            {
              "type": "checkbox",
              "name": "issue",
              "title": "My technical problems relate to (select all that apply)",
              "isRequired": true,
              "choices": [
                "Opening the form",
                "Answering questions on the form",
                "Understanding a question",
                "Uploading a screenshot",
              ],
              "showOtherItem": true
            },
            {
              "type": "comment",
              "name": "further_comments",
              "title": "[Optional] If you would like to say anything else here about the technical issues please feel free to comment",
            }
          ]
        }
      ],
      "showQuestionNumbers": "off"
    };

    // Initialize the survey model
    const survey = new Survey.Model(json);
    survey.applyTheme(themeJson); //

    // Render the survey
    $("#surveyElement").Survey({
      model: survey,
      onComplete: function (result) {
        console.log("Survey results: " + JSON.stringify(result.data));

        // Send survey data to the backend (update the URL to your server endpoint)
        fetch('https://script.google.com/macros/s/AKfycbxRu0LoZjWeGC2sWzsDwfgh9siHcGeit1ATOv59NmbwKK8H3uHq1uEj1PjzUzZHvIpQ/exec', {
          method: 'POST',
          mode: 'no-cors',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(result.data),
        })
        .then(() => {
          console.log('Success');
        })
        .catch((error) => {
          console.error('Error:', error);
        });
      }
    });
  </script>
        </div>
      </div>

      
      <footer class="footer">
        <div class="tagline">
          <b></b><br />
          <br />
          
        </div>
        <a
          href="https://digital-ethnography.com">
          <img class="logo"
            src="assets/derclogo.png"
            alt="digital ethnography research centre"/>
        </a>
      </footer>
    </main>
  </body>
</html>
